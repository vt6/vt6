<!-- draft -->
# `vt6/posix1.0` - Platform integration on POSIX-compliant systems

The canonical URL for this document is <https://vt6.io/std/posix/1.0/>.

**This is a non-normative draft.**

The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this document are to be interpreted as described in [RFC 2119](https://tools.ietf.org/html/rfc2119).

Unless stated otherwise, this document implies all definitions of terms made by [`vt6/foundation`](https://vt6.io/std/foundation/) and other referenced modules.

## 1. Scope

Operating systems that implement the [POSIX.1 specification](http://pubs.opengroup.org/onlinepubs/9699919799/) are admissible environments for VT6 clients and terminals.
This module defines how various platform-specific mechanisms throughout VT6 work on such operating systems.

## 2. Definitions for `vt6/foundation`

Standard input, output and error for each VT6 client are the file descriptors 0, 1 and 2 of that process, respectively.

Message input and message output for each VT6 client are the file descriptors 100 and 101 of that process, respectively.

POSIX allows processes to be started while a VT6 terminal is not present.
If, upon startup, the client finds message input or message output to be missing, it SHALL consider itself running on a non-VT6-enabled terminal.

## 3. Definitions for the `vt6/sig1.0` module

VT6 signals are dispatched to clients by sending the corresponding POSIX signals to the client processes:

- The `sig.interrupt` message corresponds to the `SIGINT` signal.
- The `sig.quit` message corresponds to the `SIGQUIT` signal.
- The `sig.suspend` message corresponds to the `SIGSTOP` signal.

When there is no signal dispatcher, the terminal SHOULD run all clients inside a single process group, and send these POSIX signals to that process group.

When there is a signal dispatcher, the signal dispatcher SHALL use at least one process group in the same way.
If the signal dispatcher can distinguish between client processes running in the foreground or in the background, it SHOULD use multiple process groups to track which processes are running in the foreground and send the POSIX signals to the current foreground process group only.

When a server or signal dispatcher uses the `SIGSTOP` signal to suspend processes, the `SIGCONT` signal SHALL be used to resume these processes once the user instructs the server or signal dispatcher to do so.
